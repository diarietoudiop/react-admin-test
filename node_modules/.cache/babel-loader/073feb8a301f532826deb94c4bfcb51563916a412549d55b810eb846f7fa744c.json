{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nimport * as React from 'react';\nimport { Typography } from '@mui/material';\nimport { styled } from '@mui/material/styles';\nimport ErrorIcon from '@mui/icons-material/Error';\nimport { useGetRecordRepresentation, useTranslate, ReferenceFieldBase, useReferenceFieldContext, useFieldValue } from 'ra-core';\nimport clsx from 'clsx';\nimport { LinearProgress } from '../layout';\nimport { Link } from '../Link';\nimport { genericMemo } from './genericMemo';\nimport { visuallyHidden } from '@mui/utils';\n/**\n * Fetch reference record, and render its representation, or delegate rendering to child component.\n *\n * The reference prop should be the name of one of the <Resource> components\n * added as <Admin> child.\n *\n * @example // using recordRepresentation\n * <ReferenceField label=\"User\" source=\"userId\" reference=\"users\" />\n *\n * @example // using a Field component to represent the record\n * <ReferenceField label=\"User\" source=\"userId\" reference=\"users\">\n *     <TextField source=\"name\" />\n * </ReferenceField>\n *\n * @example // By default, includes a link to the <Edit> page of the related record\n * // (`/users/:userId` in the previous example).\n * // Set the `link` prop to \"show\" to link to the <Show> page instead.\n * <ReferenceField label=\"User\" source=\"userId\" reference=\"users\" link=\"show\" />\n *\n * @example // You can also prevent `<ReferenceField>` from adding link to children\n * // by setting `link` to false.\n * <ReferenceField label=\"User\" source=\"userId\" reference=\"users\" link={false} />\n *\n * @example // Alternatively, you can also pass a custom function to `link`.\n * // It must take reference and record as arguments and return a string\n * <ReferenceField label=\"User\" source=\"userId\" reference=\"users\" link={(record, reference) => \"/path/to/${reference}/${record}\"} />\n *\n * @default\n * In previous versions of React-Admin, the prop `linkType` was used. It is now deprecated and replaced with `link`. However\n * backward-compatibility is still kept\n */\nexport var ReferenceField = function (props) {\n  var emptyText = props.emptyText;\n  var translate = useTranslate();\n  var id = useFieldValue(props);\n  if (id == null) {\n    return emptyText ? React.createElement(Typography, {\n      component: \"span\",\n      variant: \"body2\"\n    }, emptyText && translate(emptyText, {\n      _: emptyText\n    })) : null;\n  }\n  return React.createElement(ReferenceFieldBase, __assign({}, props), React.createElement(PureReferenceFieldView, __assign({}, props)));\n};\n// useful to prevent click bubbling in a datagrid with rowClick\nvar stopPropagation = function (e) {\n  return e.stopPropagation();\n};\nexport var ReferenceFieldView = function (props) {\n  var children = props.children,\n    className = props.className,\n    emptyText = props.emptyText,\n    reference = props.reference,\n    sx = props.sx;\n  var _a = useReferenceFieldContext(),\n    error = _a.error,\n    link = _a.link,\n    isLoading = _a.isLoading,\n    referenceRecord = _a.referenceRecord;\n  var getRecordRepresentation = useGetRecordRepresentation(reference);\n  var translate = useTranslate();\n  if (error) {\n    return React.createElement(\"div\", null, React.createElement(ErrorIcon, {\n      role: \"presentation\",\n      color: \"error\",\n      fontSize: \"small\"\n    }), React.createElement(\"span\", {\n      style: visuallyHidden\n    }, typeof error === 'string' ? error : error === null || error === void 0 ? void 0 : error.message));\n  }\n  // We explicitly check isLoading here as the record may not have an id for the reference,\n  // in which case, the query will not be enabled and isPending will be true\n  // isLoading checks that we are actually loading the reference record\n  if (isLoading) {\n    return React.createElement(LinearProgress, null);\n  }\n  if (!referenceRecord) {\n    return emptyText ? React.createElement(Typography, {\n      component: \"span\",\n      variant: \"body2\"\n    }, emptyText && translate(emptyText, {\n      _: emptyText\n    })) : null;\n  }\n  var child = children || React.createElement(Typography, {\n    component: \"span\",\n    variant: \"body2\"\n  }, getRecordRepresentation(referenceRecord));\n  if (link) {\n    return React.createElement(Root, {\n      className: clsx(ReferenceFieldClasses.root, className),\n      sx: sx\n    }, React.createElement(Link, {\n      to: link,\n      className: ReferenceFieldClasses.link,\n      onClick: stopPropagation,\n      state: {\n        _scrollToTop: true\n      }\n    }, child));\n  }\n  return React.createElement(Root, {\n    className: clsx(ReferenceFieldClasses.root, className),\n    sx: sx\n  }, child);\n};\nvar PureReferenceFieldView = genericMemo(ReferenceFieldView);\nvar PREFIX = 'RaReferenceField';\nexport var ReferenceFieldClasses = {\n  root: \"\".concat(PREFIX, \"-root\"),\n  link: \"\".concat(PREFIX, \"-link\")\n};\nvar Root = styled('span', {\n  name: PREFIX,\n  overridesResolver: function (props, styles) {\n    return styles.root;\n  }\n})(function (_a) {\n  var _b;\n  var theme = _a.theme;\n  return _b = {\n    lineHeight: 'initial'\n  }, _b[\"& .\".concat(ReferenceFieldClasses.link)] = {\n    '& > *': {\n      color: theme.palette.primary.main\n    }\n  }, _b;\n});","map":{"version":3,"names":["React","Typography","styled","ErrorIcon","useGetRecordRepresentation","useTranslate","ReferenceFieldBase","useReferenceFieldContext","useFieldValue","clsx","LinearProgress","Link","genericMemo","visuallyHidden","ReferenceField","props","emptyText","translate","id","createElement","component","variant","_","__assign","PureReferenceFieldView","stopPropagation","e","ReferenceFieldView","children","className","reference","sx","_a","error","link","isLoading","referenceRecord","getRecordRepresentation","role","color","fontSize","style","message","child","Root","ReferenceFieldClasses","root","to","onClick","state","_scrollToTop","PREFIX","concat","name","overridesResolver","styles","theme","_b","lineHeight","palette","primary","main"],"sources":["/home/diarietou/Bureau/afterSA/test/testfront/react-admin-test/node_modules/ra-ui-materialui/src/field/ReferenceField.tsx"],"sourcesContent":["import * as React from 'react';\nimport { ReactNode } from 'react';\nimport { Typography, SxProps } from '@mui/material';\nimport { styled } from '@mui/material/styles';\nimport ErrorIcon from '@mui/icons-material/Error';\nimport {\n    LinkToType,\n    useGetRecordRepresentation,\n    useTranslate,\n    RaRecord,\n    ReferenceFieldBase,\n    useReferenceFieldContext,\n    useFieldValue,\n} from 'ra-core';\nimport { UseQueryOptions } from '@tanstack/react-query';\nimport clsx from 'clsx';\n\nimport { LinearProgress } from '../layout';\nimport { Link } from '../Link';\nimport { FieldProps } from './types';\nimport { genericMemo } from './genericMemo';\nimport { visuallyHidden } from '@mui/utils';\n\n/**\n * Fetch reference record, and render its representation, or delegate rendering to child component.\n *\n * The reference prop should be the name of one of the <Resource> components\n * added as <Admin> child.\n *\n * @example // using recordRepresentation\n * <ReferenceField label=\"User\" source=\"userId\" reference=\"users\" />\n *\n * @example // using a Field component to represent the record\n * <ReferenceField label=\"User\" source=\"userId\" reference=\"users\">\n *     <TextField source=\"name\" />\n * </ReferenceField>\n *\n * @example // By default, includes a link to the <Edit> page of the related record\n * // (`/users/:userId` in the previous example).\n * // Set the `link` prop to \"show\" to link to the <Show> page instead.\n * <ReferenceField label=\"User\" source=\"userId\" reference=\"users\" link=\"show\" />\n *\n * @example // You can also prevent `<ReferenceField>` from adding link to children\n * // by setting `link` to false.\n * <ReferenceField label=\"User\" source=\"userId\" reference=\"users\" link={false} />\n *\n * @example // Alternatively, you can also pass a custom function to `link`.\n * // It must take reference and record as arguments and return a string\n * <ReferenceField label=\"User\" source=\"userId\" reference=\"users\" link={(record, reference) => \"/path/to/${reference}/${record}\"} />\n *\n * @default\n * In previous versions of React-Admin, the prop `linkType` was used. It is now deprecated and replaced with `link`. However\n * backward-compatibility is still kept\n */\nexport const ReferenceField = <\n    RecordType extends Record<string, any> = Record<string, any>,\n    ReferenceRecordType extends RaRecord = RaRecord,\n>(\n    props: ReferenceFieldProps<RecordType, ReferenceRecordType>\n) => {\n    const { emptyText } = props;\n    const translate = useTranslate();\n    const id = useFieldValue(props);\n\n    if (id == null) {\n        return emptyText ? (\n            <Typography component=\"span\" variant=\"body2\">\n                {emptyText && translate(emptyText, { _: emptyText })}\n            </Typography>\n        ) : null;\n    }\n\n    return (\n        <ReferenceFieldBase<ReferenceRecordType> {...props}>\n            <PureReferenceFieldView<RecordType, ReferenceRecordType>\n                {...props}\n            />\n        </ReferenceFieldBase>\n    );\n};\n\nexport interface ReferenceFieldProps<\n    RecordType extends Record<string, any> = Record<string, any>,\n    ReferenceRecordType extends RaRecord = RaRecord,\n> extends FieldProps<RecordType> {\n    children?: ReactNode;\n    queryOptions?: Omit<\n        UseQueryOptions<ReferenceRecordType[], Error>,\n        'queryFn' | 'queryKey'\n    >;\n    reference: string;\n    translateChoice?: Function | boolean;\n    link?: LinkToType<ReferenceRecordType>;\n    sx?: SxProps;\n}\n\n// useful to prevent click bubbling in a datagrid with rowClick\nconst stopPropagation = e => e.stopPropagation();\n\nexport const ReferenceFieldView = <\n    RecordType extends Record<string, any> = Record<string, any>,\n    ReferenceRecordType extends RaRecord = RaRecord,\n>(\n    props: ReferenceFieldViewProps<RecordType, ReferenceRecordType>\n) => {\n    const { children, className, emptyText, reference, sx } = props;\n    const { error, link, isLoading, referenceRecord } =\n        useReferenceFieldContext();\n\n    const getRecordRepresentation = useGetRecordRepresentation(reference);\n    const translate = useTranslate();\n\n    if (error) {\n        return (\n            <div>\n                <ErrorIcon role=\"presentation\" color=\"error\" fontSize=\"small\" />\n                <span style={visuallyHidden}>\n                    {typeof error === 'string' ? error : error?.message}\n                </span>\n            </div>\n        );\n    }\n    // We explicitly check isLoading here as the record may not have an id for the reference,\n    // in which case, the query will not be enabled and isPending will be true\n    // isLoading checks that we are actually loading the reference record\n    if (isLoading) {\n        return <LinearProgress />;\n    }\n    if (!referenceRecord) {\n        return emptyText ? (\n            <Typography component=\"span\" variant=\"body2\">\n                {emptyText && translate(emptyText, { _: emptyText })}\n            </Typography>\n        ) : null;\n    }\n\n    let child = children || (\n        <Typography component=\"span\" variant=\"body2\">\n            {getRecordRepresentation(referenceRecord)}\n        </Typography>\n    );\n\n    if (link) {\n        return (\n            <Root\n                className={clsx(ReferenceFieldClasses.root, className)}\n                sx={sx}\n            >\n                <Link\n                    to={link}\n                    className={ReferenceFieldClasses.link}\n                    onClick={stopPropagation}\n                    state={{ _scrollToTop: true }}\n                >\n                    {child}\n                </Link>\n            </Root>\n        );\n    }\n\n    return (\n        <Root className={clsx(ReferenceFieldClasses.root, className)} sx={sx}>\n            {child}\n        </Root>\n    );\n};\n\nexport interface ReferenceFieldViewProps<\n    RecordType extends Record<string, any> = Record<string, any>,\n    ReferenceRecordType extends RaRecord = RaRecord,\n> extends FieldProps<RecordType>,\n        Omit<ReferenceFieldProps<RecordType, ReferenceRecordType>, 'link'> {\n    children?: ReactNode;\n    reference: string;\n    resource?: string;\n    translateChoice?: Function | boolean;\n    sx?: SxProps;\n}\n\nconst PureReferenceFieldView = genericMemo(ReferenceFieldView);\n\nconst PREFIX = 'RaReferenceField';\n\nexport const ReferenceFieldClasses = {\n    root: `${PREFIX}-root`,\n    link: `${PREFIX}-link`,\n};\n\nconst Root = styled('span', {\n    name: PREFIX,\n    overridesResolver: (props, styles) => styles.root,\n})(({ theme }) => ({\n    lineHeight: 'initial',\n    [`& .${ReferenceFieldClasses.link}`]: {\n        '& > *': {\n            color: theme.palette.primary.main,\n        },\n    },\n}));\n"],"mappings":";;;;;;;;;;AAAA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAE9B,SAASC,UAAU,QAAiB,eAAe;AACnD,SAASC,MAAM,QAAQ,sBAAsB;AAC7C,OAAOC,SAAS,MAAM,2BAA2B;AACjD,SAEIC,0BAA0B,EAC1BC,YAAY,EAEZC,kBAAkB,EAClBC,wBAAwB,EACxBC,aAAa,QACV,SAAS;AAEhB,OAAOC,IAAI,MAAM,MAAM;AAEvB,SAASC,cAAc,QAAQ,WAAW;AAC1C,SAASC,IAAI,QAAQ,SAAS;AAE9B,SAASC,WAAW,QAAQ,eAAe;AAC3C,SAASC,cAAc,QAAQ,YAAY;AAE3C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA,OAAO,IAAMC,cAAc,GAAG,SAAAA,CAI1BC,KAA2D;EAEnD,IAAAC,SAAS,GAAKD,KAAK,CAAAC,SAAV;EACjB,IAAMC,SAAS,GAAGZ,YAAY,EAAE;EAChC,IAAMa,EAAE,GAAGV,aAAa,CAACO,KAAK,CAAC;EAE/B,IAAIG,EAAE,IAAI,IAAI,EAAE;IACZ,OAAOF,SAAS,GACZhB,KAAA,CAAAmB,aAAA,CAAClB,UAAU;MAACmB,SAAS,EAAC,MAAM;MAACC,OAAO,EAAC;IAAO,GACvCL,SAAS,IAAIC,SAAS,CAACD,SAAS,EAAE;MAAEM,CAAC,EAAEN;IAAS,CAAE,CAAC,CAC3C,GACb,IAAI;;EAGZ,OACIhB,KAAA,CAAAmB,aAAA,CAACb,kBAAkB,EAAAiB,QAAA,KAA0BR,KAAK,GAC9Cf,KAAA,CAAAmB,aAAA,CAACK,sBAAsB,EAAAD,QAAA,KACfR,KAAK,EACX,CACe;AAE7B,CAAC;AAiBD;AACA,IAAMU,eAAe,GAAG,SAAAA,CAAAC,CAAC;EAAI,OAAAA,CAAC,CAACD,eAAe,EAAE;AAAnB,CAAmB;AAEhD,OAAO,IAAME,kBAAkB,GAAG,SAAAA,CAI9BZ,KAA+D;EAEvD,IAAAa,QAAQ,GAA0Cb,KAAK,CAAAa,QAA/C;IAAEC,SAAS,GAA+Bd,KAAK,CAAAc,SAApC;IAAEb,SAAS,GAAoBD,KAAK,CAAAC,SAAzB;IAAEc,SAAS,GAASf,KAAK,CAAAe,SAAd;IAAEC,EAAE,GAAKhB,KAAK,CAAAgB,EAAV;EAC/C,IAAAC,EAAA,GACFzB,wBAAwB,EAAE;IADtB0B,KAAK,GAAAD,EAAA,CAAAC,KAAA;IAAEC,IAAI,GAAAF,EAAA,CAAAE,IAAA;IAAEC,SAAS,GAAAH,EAAA,CAAAG,SAAA;IAAEC,eAAe,GAAAJ,EAAA,CAAAI,eACjB;EAE9B,IAAMC,uBAAuB,GAAGjC,0BAA0B,CAAC0B,SAAS,CAAC;EACrE,IAAMb,SAAS,GAAGZ,YAAY,EAAE;EAEhC,IAAI4B,KAAK,EAAE;IACP,OACIjC,KAAA,CAAAmB,aAAA,cACInB,KAAA,CAAAmB,aAAA,CAAChB,SAAS;MAACmC,IAAI,EAAC,cAAc;MAACC,KAAK,EAAC,OAAO;MAACC,QAAQ,EAAC;IAAO,EAAG,EAChExC,KAAA,CAAAmB,aAAA;MAAMsB,KAAK,EAAE5B;IAAc,GACtB,OAAOoB,KAAK,KAAK,QAAQ,GAAGA,KAAK,GAAGA,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAES,OAAO,CAChD,CACL;;EAGd;EACA;EACA;EACA,IAAIP,SAAS,EAAE;IACX,OAAOnC,KAAA,CAAAmB,aAAA,CAACT,cAAc,OAAG;;EAE7B,IAAI,CAAC0B,eAAe,EAAE;IAClB,OAAOpB,SAAS,GACZhB,KAAA,CAAAmB,aAAA,CAAClB,UAAU;MAACmB,SAAS,EAAC,MAAM;MAACC,OAAO,EAAC;IAAO,GACvCL,SAAS,IAAIC,SAAS,CAACD,SAAS,EAAE;MAAEM,CAAC,EAAEN;IAAS,CAAE,CAAC,CAC3C,GACb,IAAI;;EAGZ,IAAI2B,KAAK,GAAGf,QAAQ,IAChB5B,KAAA,CAAAmB,aAAA,CAAClB,UAAU;IAACmB,SAAS,EAAC,MAAM;IAACC,OAAO,EAAC;EAAO,GACvCgB,uBAAuB,CAACD,eAAe,CAAC,CAEhD;EAED,IAAIF,IAAI,EAAE;IACN,OACIlC,KAAA,CAAAmB,aAAA,CAACyB,IAAI;MACDf,SAAS,EAAEpB,IAAI,CAACoC,qBAAqB,CAACC,IAAI,EAAEjB,SAAS,CAAC;MACtDE,EAAE,EAAEA;IAAE,GAEN/B,KAAA,CAAAmB,aAAA,CAACR,IAAI;MACDoC,EAAE,EAAEb,IAAI;MACRL,SAAS,EAAEgB,qBAAqB,CAACX,IAAI;MACrCc,OAAO,EAAEvB,eAAe;MACxBwB,KAAK,EAAE;QAAEC,YAAY,EAAE;MAAI;IAAE,GAE5BP,KAAK,CACH,CACJ;;EAIf,OACI3C,KAAA,CAAAmB,aAAA,CAACyB,IAAI;IAACf,SAAS,EAAEpB,IAAI,CAACoC,qBAAqB,CAACC,IAAI,EAAEjB,SAAS,CAAC;IAAEE,EAAE,EAAEA;EAAE,GAC/DY,KAAK,CACH;AAEf,CAAC;AAcD,IAAMnB,sBAAsB,GAAGZ,WAAW,CAACe,kBAAkB,CAAC;AAE9D,IAAMwB,MAAM,GAAG,kBAAkB;AAEjC,OAAO,IAAMN,qBAAqB,GAAG;EACjCC,IAAI,EAAE,GAAAM,MAAA,CAAGD,MAAM,UAAO;EACtBjB,IAAI,EAAE,GAAAkB,MAAA,CAAGD,MAAM;CAClB;AAED,IAAMP,IAAI,GAAG1C,MAAM,CAAC,MAAM,EAAE;EACxBmD,IAAI,EAAEF,MAAM;EACZG,iBAAiB,EAAE,SAAAA,CAACvC,KAAK,EAAEwC,MAAM;IAAK,OAAAA,MAAM,CAACT,IAAI;EAAX;CACzC,CAAC,CAAC,UAACd,EAAS;;MAAPwB,KAAK,GAAAxB,EAAA,CAAAwB,KAAA;EAAO,OAAAC,EAAA;IACdC,UAAU,EAAE;KACZD,EAAA,CAAC,MAAAL,MAAA,CAAMP,qBAAqB,CAACX,IAAI,CAAE,IAAG;IAClC,OAAO,EAAE;MACLK,KAAK,EAAEiB,KAAK,CAACG,OAAO,CAACC,OAAO,CAACC;;GAEpC,E;AANa,CAOhB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport * as React from 'react';\nimport { Children, createElement } from 'react';\nimport warning from '../util/warning';\nimport { useAuthenticated } from './useAuthenticated';\nimport usePermissions from './usePermissions';\nvar isEmptyChildren = function (children) {\n  return Children.count(children) === 0;\n};\n/**\n * After checking that the user is authenticated,\n * retrieves the user's permissions for a specific context.\n *\n * Useful for Route components ; used internally by Resource.\n * Use it to decorate your custom page components to require\n * a custom role. It will pass the permissions as a prop to your\n * component.\n *\n * You can set additional `authParams` at will if your authProvider\n * requires it.\n *\n * @example\n *     import { Admin, CustomRoutes, WithPermissions } from 'react-admin';\n *\n *     const Foo = ({ permissions }) => (\n *         {permissions === 'admin' ? <p>Sensitive data</p> : null}\n *         <p>Not sensitive data</p>\n *     );\n *\n *     const customRoutes = [\n *         <Route path=\"/foo\" element={\n *             <WithPermissions\n *                  authParams={{ foo: 'bar' }}\n *                  component={({ permissions, ...props }) => <Foo permissions={permissions} {...props} />}\n *              />\n *         } />\n *     ];\n *     const App = () => (\n *         <Admin>\n *             <CustomRoutes>{customRoutes}</CustomRoutes>\n *         </Admin>\n *     );\n */\nvar WithPermissions = function (props) {\n  var authParams = props.authParams,\n    children = props.children,\n    render = props.render,\n    component = props.component,\n    _a = props.loading,\n    Loading = _a === void 0 ? null : _a,\n    staticContext = props.staticContext,\n    rest = __rest(props, [\"authParams\", \"children\", \"render\", \"component\", \"loading\", \"staticContext\"]);\n  warning(render && children && !isEmptyChildren(children) || render && component || component && children && !isEmptyChildren(children), 'You should only use one of the `component`, `render` and `children` props in <WithPermissions>');\n  var isAuthenticationPending = useAuthenticated(authParams).isPending;\n  var _b = usePermissions(authParams, {\n      enabled: !isAuthenticationPending\n    }),\n    permissions = _b.permissions,\n    isPendingPermissions = _b.isPending;\n  // We must check both pending states here as if the authProvider does not implement getPermissions, isPendingPermissions will always be false\n  if (isAuthenticationPending || isPendingPermissions) {\n    return Loading ? React.createElement(Loading, null) : null;\n  }\n  if (component) {\n    return createElement(component, __assign({\n      permissions: permissions\n    }, rest));\n  }\n  // @deprecated\n  if (render) {\n    return render(__assign({\n      permissions: permissions\n    }, rest));\n  }\n  // @deprecated\n  if (children) {\n    return children(__assign({\n      permissions: permissions\n    }, rest));\n  }\n};\nexport default WithPermissions;","map":{"version":3,"names":["React","Children","createElement","warning","useAuthenticated","usePermissions","isEmptyChildren","children","count","WithPermissions","props","authParams","render","component","_a","loading","Loading","staticContext","rest","__rest","isAuthenticationPending","isPending","_b","enabled","permissions","isPendingPermissions","__assign"],"sources":["/home/diarietou/Bureau/afterSA/test/testfront/react-admin-test/node_modules/ra-core/src/auth/WithPermissions.tsx"],"sourcesContent":["import * as React from 'react';\nimport { Children, ReactElement, ComponentType, createElement } from 'react';\nimport { Location } from 'react-router-dom';\n\nimport warning from '../util/warning';\nimport { useAuthenticated } from './useAuthenticated';\nimport usePermissions from './usePermissions';\n\nexport interface WithPermissionsChildrenParams {\n    permissions: any;\n}\n\ntype WithPermissionsChildren = (\n    params: WithPermissionsChildrenParams\n) => ReactElement;\n\nexport interface WithPermissionsProps {\n    authParams?: object;\n    children?: WithPermissionsChildren;\n    component?: ComponentType<any>;\n    loading?: ComponentType<any>;\n    location?: Location;\n    render?: WithPermissionsChildren;\n    staticContext?: object;\n    [key: string]: any;\n}\n\nconst isEmptyChildren = children => Children.count(children) === 0;\n\n/**\n * After checking that the user is authenticated,\n * retrieves the user's permissions for a specific context.\n *\n * Useful for Route components ; used internally by Resource.\n * Use it to decorate your custom page components to require\n * a custom role. It will pass the permissions as a prop to your\n * component.\n *\n * You can set additional `authParams` at will if your authProvider\n * requires it.\n *\n * @example\n *     import { Admin, CustomRoutes, WithPermissions } from 'react-admin';\n *\n *     const Foo = ({ permissions }) => (\n *         {permissions === 'admin' ? <p>Sensitive data</p> : null}\n *         <p>Not sensitive data</p>\n *     );\n *\n *     const customRoutes = [\n *         <Route path=\"/foo\" element={\n *             <WithPermissions\n *                  authParams={{ foo: 'bar' }}\n *                  component={({ permissions, ...props }) => <Foo permissions={permissions} {...props} />}\n *              />\n *         } />\n *     ];\n *     const App = () => (\n *         <Admin>\n *             <CustomRoutes>{customRoutes}</CustomRoutes>\n *         </Admin>\n *     );\n */\nconst WithPermissions = (props: WithPermissionsProps) => {\n    const {\n        authParams,\n        children,\n        render,\n        component,\n        loading: Loading = null,\n        staticContext,\n        ...rest\n    } = props;\n    warning(\n        (render && children && !isEmptyChildren(children)) ||\n            (render && component) ||\n            (component && children && !isEmptyChildren(children)),\n        'You should only use one of the `component`, `render` and `children` props in <WithPermissions>'\n    );\n\n    const { isPending: isAuthenticationPending } = useAuthenticated(authParams);\n    const { permissions, isPending: isPendingPermissions } = usePermissions(\n        authParams,\n        {\n            enabled: !isAuthenticationPending,\n        }\n    );\n    // We must check both pending states here as if the authProvider does not implement getPermissions, isPendingPermissions will always be false\n    if (isAuthenticationPending || isPendingPermissions) {\n        return Loading ? <Loading /> : null;\n    }\n\n    if (component) {\n        return createElement(component, { permissions, ...rest });\n    }\n    // @deprecated\n    if (render) {\n        return render({ permissions, ...rest });\n    }\n    // @deprecated\n    if (children) {\n        return children({ permissions, ...rest });\n    }\n};\n\nexport default WithPermissions as ComponentType<WithPermissionsProps>;\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAC9B,SAASC,QAAQ,EAA+BC,aAAa,QAAQ,OAAO;AAG5E,OAAOC,OAAO,MAAM,iBAAiB;AACrC,SAASC,gBAAgB,QAAQ,oBAAoB;AACrD,OAAOC,cAAc,MAAM,kBAAkB;AAqB7C,IAAMC,eAAe,GAAG,SAAAA,CAAAC,QAAQ;EAAI,OAAAN,QAAQ,CAACO,KAAK,CAACD,QAAQ,CAAC,KAAK,CAAC;AAA9B,CAA8B;AAElE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA,IAAME,eAAe,GAAG,SAAAA,CAACC,KAA2B;EAE5C,IAAAC,UAAU,GAOVD,KAAK,CAAAC,UAPK;IACVJ,QAAQ,GAMRG,KAAK,CAAAH,QANG;IACRK,MAAM,GAKNF,KAAK,CAAAE,MALC;IACNC,SAAS,GAITH,KAAK,CAAAG,SAJI;IACTC,EAAA,GAGAJ,KAAK,CAAAK,OAHkB;IAAdC,OAAO,GAAAF,EAAA,cAAG,IAAI,GAAAA,EAAA;IACvBG,aAAa,GAEbP,KAAK,CAAAO,aAFQ;IACVC,IAAI,GAAAC,MAAA,CACPT,KAAK,EARH,6EAQL,CADU;EAEXP,OAAO,CACFS,MAAM,IAAIL,QAAQ,IAAI,CAACD,eAAe,CAACC,QAAQ,CAAC,IAC5CK,MAAM,IAAIC,SAAU,IACpBA,SAAS,IAAIN,QAAQ,IAAI,CAACD,eAAe,CAACC,QAAQ,CAAE,EACzD,gGAAgG,CACnG;EAEO,IAAWa,uBAAuB,GAAKhB,gBAAgB,CAACO,UAAU,CAAC,CAAAU,SAAjC;EACpC,IAAAC,EAAA,GAAmDjB,cAAc,CACnEM,UAAU,EACV;MACIY,OAAO,EAAE,CAACH;KACb,CACJ;IALOI,WAAW,GAAAF,EAAA,CAAAE,WAAA;IAAaC,oBAAoB,GAAAH,EAAA,CAAAD,SAKnD;EACD;EACA,IAAID,uBAAuB,IAAIK,oBAAoB,EAAE;IACjD,OAAOT,OAAO,GAAGhB,KAAA,CAAAE,aAAA,CAACc,OAAO,OAAG,GAAG,IAAI;;EAGvC,IAAIH,SAAS,EAAE;IACX,OAAOX,aAAa,CAACW,SAAS,EAAAa,QAAA;MAAIF,WAAW,EAAAA;IAAA,GAAKN,IAAI,EAAG;;EAE7D;EACA,IAAIN,MAAM,EAAE;IACR,OAAOA,MAAM,CAAAc,QAAA;MAAGF,WAAW,EAAAA;IAAA,GAAKN,IAAI,EAAG;;EAE3C;EACA,IAAIX,QAAQ,EAAE;IACV,OAAOA,QAAQ,CAAAmB,QAAA;MAAGF,WAAW,EAAAA;IAAA,GAAKN,IAAI,EAAG;;AAEjD,CAAC;AAED,eAAeT,eAAsD","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}